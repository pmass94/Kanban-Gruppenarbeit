<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: addtask.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: addtask.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let tasks = [];

let task = {
    "id": " ",
    'category': 'ToDo',
    "title": " ",
    "date": " ",
    "taskcategory": " ",
    "urgency": " ",
    "description": " ",
    "user": 'user[0]'

};


/**
 * This function creates the new Task and after uploading it on the server in the JSON
 * opens the Board page
 */
async function createTask() {
    let title = document.getElementById('title');
    let date = document.getElementById('date');
    let category = document.getElementById('categories');
    let urgency = document.getElementById('urgency-type');
    let description = document.getElementById('description');

    task['id'] = tasks.length;
    task['category'] = 'ToDo';
    task['date'] = date.value;
    task['title'] = title.value;
    task['taskcategory'] = category.selectedIndex;
    task['urgency'] = urgency.selectedIndex;
    task['description'] = description.value;
   
    tasks.push(task);
    console.log(tasks);
    await backend.setItem('tasks', JSON.stringify(tasks));
    title.value = ' ';
    date.value = null;
    description.value = ' ';
    openBoard();
}

async function openBoard() {

    window.location.href = './board.html';

}
/**
 * this function cancels the new task
 */
function cancel() {
    document.getElementById('title').value = ' ';
    document.getElementById('date').value = null;
    document.getElementById('description').value = ' ';
}
/**
 * this function opens the add user window after clicking the +
 * by "assigned to"
 */
function addUser() {
    document.getElementById('user1').innerHTML = `
    &lt;span>&lt;img src=${users[0]['logo']} class="addUserImg" >&lt;/span> 
    &lt;span>${users[0]['vorname']}  ${users[0]['name']} &lt;/span>`;
    document.getElementById('user2').innerHTML = `
    &lt;span>&lt;img src=${users[1]['logo']} class="addUserImg" >&lt;/span> 
    &lt;span>${users[1]['vorname']}  ${users[1]['name']} &lt;/span>`;
    document.getElementById('user3').innerHTML = `
    &lt;span>&lt;img src=${users[2]['logo']} class="addUserImg" >&lt;/span> 
    &lt;span>${users[2]['vorname']}  ${users[2]['name']}&lt;/span> `;
    document.getElementById('assignUser').classList.remove('d-none');
}
/**
 * this function closes the add user window
 */
function closeAssignment() {
    document.getElementById('assignUser').classList.add('d-none');
}
/**
 * this function selects the user from add user window
 * and add it by "assigned to"
 * @param {number} index - the index of the user that will have the task assigned to
 */
function selectUser(index) {
    let user = users[index];
    task['user'] = user;
    document.getElementById('userdata').innerHTML = `
    &lt;img id="userimg" src="" alt="">
    &lt;div id="username">&lt;/div>
    `;

    document.getElementById('userimg').src = users[index]['logo'];
    document.getElementById('username').innerHTML = users[index]['vorname'] + ' ' + users[index]['name'];
    closeAssignment();

}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addUser">addUser</a></li><li><a href="global.html#cancel">cancel</a></li><li><a href="global.html#closeAssignment">closeAssignment</a></li><li><a href="global.html#createTask">createTask</a></li><li><a href="global.html#selectUser">selectUser</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Wed Aug 25 2021 13:50:34 GMT+0200 (Mitteleurop√§ische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
